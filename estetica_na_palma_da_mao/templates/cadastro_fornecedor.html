{% extends 'base.html' %}

{% block title %}Cadastro de Fornecedores{% endblock %}

{% block content %}
<form id="form">
    <table style="background-color: #F8D36F; width: 50%; border: 2px solid #6C3241;" align="center">
        <tr>
            <th colspan="4" style="font-size: 150%;">Cadastro de Fornecedores</th>
        </tr>

        <tr>
            <th align="left">Nome da empresa ou razão social:</th>
            <td><input type="text" name="nome" id="nome"></td>
        </tr>
        <tr>
            <th align="left">CNPJ:</th>
            <td><input type="number" name="cnpj" id="cnpj"></td>
        </tr>
        <tr>
            <th align="left">Rua:</th>
            <td><input type="text" name="rua" id="rua"></td>
            <th align="left">CEP:</th>
            <td><input type="number" name="cep" id="cep"></td>
        </tr>
        <tr>
            <th align="left">Cidade:</th>
            <td><input type="text" name="cidade" id="cidade"></td>
            <th>Estado:</th>
            <td>
                <select id="estado" name="estado">
                    <option></option>
                    {% for uf in estados %}
                    <option>{{ uf }}</option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        <tr>
            <th align="left">Telefone:</th>
            <td><input type="number" name="tell" id="tell"></td>
            <th align="left">E-mail:</th>
            <td><input type="email" name="email" id="email"></td>
        </tr>
        <tr>
            <th align="left">Forma de pagamento:</th>
            <td colspan="3">
                <input type="radio" id="debito" name="forma_pagamento" value="debito"><label for="debito">Débito</label>
                <input type="radio" id="credito" name="forma_pagamento" value="credito"><label
                    for="credito">Crédito</label>
                <input type="radio" id="boleto" name="forma_pagamento" value="boleto"><label for="boleto">Boleto</label>
                <input type="radio" id="avista" name="forma_pagamento" value="avista"><label for="avista">À
                    Vista</label>
                <input type="radio" id="parcelado" name="forma_pagamento" value="parcelado"><label
                    for="parcelado">Parcelado</label>
            </td>
        </tr>
        <tr>
            <th align="left">Quantas parcelas:</th>
            <td><input type="number" name="parcelas" id="parcelas"></td>
        </tr>
        <tr>
            <th align="left">Entrega:</th>
            <td><input type="text" name="entrega" id="entrega"></td>
            <th align="left">Custo de Frete:</th>
            <td><input type="number" name="frete" id="frete"></td>
        </tr>
        <tr>
            <th align="left">Site:</th>
            <td colspan="3"><input type="text" name="site" id="site" style="width: 100%;"></td>
        </tr>
        <tr>
            <td colspan="2" align="center"><input type="submit" value="Salvar"></td>
            <td colspan="2" align="center"><input type="reset" value="Cancelar"></td>
        </tr>
    </table>
</form>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('form');

        form.addEventListener('submit', event => {
            const requiredFields = ['nome', 'cnpj', 'rua', 'cep', 'cidade', 'tell', 'email'];
            for (const id of requiredFields) {
                const field = document.getElementById(id);
                if (!field.value) {
                    alert(`Preencha o campo: ${field.name}`);
                    event.preventDefault();
                    return;
                }
            }

            const forma = document.querySelectorAll('input[name="forma_pagamento"]:checked');
            if (forma.length === 0) {
                alert("Escolha uma forma de pagamento.");
                event.preventDefault();
                return;
            }

            const parcelado = document.getElementById('parcelado');
            const parcelas = document.getElementById('parcelas');
            if (parcelado.checked && !parcelas.value) {
                alert("Informe o número de parcelas.");
                event.preventDefault();
            }
        });
    });
</script>
{% endblock %}