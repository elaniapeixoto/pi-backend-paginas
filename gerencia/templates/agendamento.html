{% extends "base.html" %}

{% load static %}

{% block title %} Agendamentos {% endblock %}

{% block content %}

<body>
    <form id="agendamentoForm" novalidate>
        <table
            style="background-color: #F8D36F; font-family: Verdana, Geneva, Tahoma, sans-serif; border-width: 2px; border-style: solid; border-color: #6C3241"
            width="50%" align="center">
            
            <tr>
                <th><label for="nome">Nome:</label></th>
                <td colspan="2"><input type="text" id="nome" name="nome" size="30"></td>
            </tr>
            <tr>
                <th><label for="proced">Procedimento:</label></th>
                <td colspan="2">
                    <select name="proced" id="proced">
                        <option value="" selected disabled>Selecione o procedimento desejado</option>
                        <option value="Limpeza de pele">Limpeza de Pele</option>
                        <option value="Hidro gloss">Hidro Gross</option>
                        <option value="Micropigmentacao Labial">Micropigmentação Labial</option>
                        <option value="Design Sombrancelha">Design de Sombrancelha</option>
                        <option value="Protocolo Alecrim Dourado">Protocolo Alecrim Dourado</option>
                        <option value="Psicologa">Psicologa</option>
                        <option value="Nutricionista">Nutricionista</option>
                        <option value="Protocolo Metamoforse">Protocolo Metamoforse</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th><label for="prof">Profissional:</label></th>
                <td><input type="checkbox" name="prof" value="Pamela">Pamela</td>
                <td><input type="checkbox" name="prof" value="Ana Paula">Ana Paula
            </tr>

            </tr>
            <tr>
                <td>&nbsp;</td>
                <td><input type="checkbox" name="prof" value="Carline">Carline</td>
            </tr>
            <tr>
                <th><label for="datahora">Data e Hora desejada:</label></th>
                <td colspan="2"><input type="datetime-local" id="datahora" name="datahora">
                </td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td><input type="submit" value="Agendar"></td>
                <td><input type="reset" value="Cancelar"></td>
            </tr>

        </table>

    </form>


    <script>
        const form = document.getElementById('agendamentoForm');
        const nome = document.getElementById('nome');
        const proced = document.getElementById('proced');
        const profs = document.getElementsByName('prof');
        const datahora = document.getElementById('datahora');

        form.addEventListener("submit", event => {
            event.preventDefault();

            if (nome.value.trim() === "") {
                alert("Preencha o nome");
                return;
            }

            if (proced.value === "") {
                alert("Escolha um procedimento");
                return;
            }

            let profChecked = false;
            for (let i = 0; i < profs.length; i++) {
                if (profs[i].checked) {
                    profChecked = true;
                    break;
                }
            }

            if (!profChecked) {
                alert("Escolha pelo menos um profissional");
                return;
            }

            if (datahora.value === "") {
                alert("Escolha a data e hora desejada");
                return;
            }

            form.submit();
        });
    </script>

</body>

{% endblock %}