{% extends "gerencia/base.html" %}
{% load static %}

{% block title %} Cadastro de Funcionário {% endblock %}

{% block content %}
<form id="form" method='POST'
          action="{% if funcionario %}{% url 'editar_funcionario' funcionario.id %}{% else %}{% url 'cadastro_funcionario' %}{% endif %}">

          {% csrf_token %}
          <table class='content w-50' align='center'>
                    <tr>
                              <th><label for="pessoa">PESSOA *</label></th>
                              <td>
                                        <select name="pessoa" id="pessoa" required>
                                                  <option value="">--- Escolha uma pessoa ---</option>
                                                  {% for p in pessoas %}
                                                  {% if funcionario and funcionario.pessoa.id == p.id %}
                                                  <option value="{{ p.id }}" selected>{{ p.nome_completo }}</option>
                                                  {% else %}
                                                  <option value="{{ p.id }}">{{ p.nome_completo }}</option>
                                                  {% endif %}
                                                  {% endfor %}
                                        </select>
                              </td>
                    </tr>

                    <tr>
                              <th><label for="cargo">CARGO *</label></th>
                              <td><input type="text" id="cargo" name="cargo" required
                                                  value="{{ funcionario.cargo|default_if_none:'' }}"></td>
                    </tr>

                    <tr>
                              <th><label for="salario">SALÁRIO *</label></th>
                              <td><input type="number" step="0.01" id="salario" name="salario" required
                                                  value="{{ funcionario.salario|default_if_none:'' }}"></td>
                    </tr>

                    <tr>
                              <th><label for="pis">PIS *</label></th>
                              <td><input type="text" id="pis" name="pis" maxlength="13" required
                                                  value="{{ funcionario.pis|default_if_none:'' }}"></td>
                    </tr>

                    <tr>
                              <th><label for="entrada">DATA DE ENTRADA *</label></th>
                              <td><input type="date" id="entrada" name="entrada" required
                                                  value="{{ funcionario.entrada|date:'Y-m-d' }}"></td>
                    </tr>

                    <tr>
                              <th><label for="saida">DATA DE SAÍDA</label></th>
                              <td><input type="date" id="saida" name="saida"
                                                  value="{{ funcionario.saida|date:'Y-m-d' }}"></td>
                    </tr>
          </table>

          <div align='center'>
                    <a href="{% url 'lista_funcionario' %}" class="btn btn-secondary">Cancelar</a> &nbsp;&nbsp;
                    <input class='btn btn-success' type="submit" value="Salvar">
          </div>
</form>
{% endblock %}